"use strict";(self.webpackChunkggudok=self.webpackChunkggudok||[]).push([[488],{8488:function(e,s,n){n.r(s);var a=n(3433),t=n(4165),i=n(5861),c=n(9439),r=n(2791),l=n(1243),m=n(9434),o=n(7689),d=n(1087),u=n(3080),h=n(2498),x=n(5480),v=n(3829),j=n(5229),f=n(5359),Z=n(5463),p=n(184),N="/images/common/noimg.png",g=function(e){var s=e.myItemReviewRating,n=e.myItemReviewContents,l=e.subsId,o=(0,m.I0)(),h=(0,m.v9)((function(e){return e.user.isLoggedIn})),x=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(a){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),h?0===n.length?alert("\ub0b4\uc6a9\uc744 \uc791\uc131\ud558\uc138\uc694."):0===s||void 0===s?alert("\ubcc4\uc810\uc744 1\uc810 \uc774\uc0c1 \uc791\uc131\ud574\uc8fc\uc138\uc694."):(i={subsId:l,rating:s,contents:n},o((0,Z.Df)(i))):alert("\ub85c\uadf8\uc778 \ud6c4 \uc791\uc131\ud558\uc138\uc694.");case 2:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),v=(0,r.useState)(new Array(5).fill(!1).map((function(e,n){return n<s}))),j=(0,c.Z)(v,2),f=j[0],N=j[1],g=function(e){for(var s=(0,a.Z)(f),n=0;n<5;n++)s[n]=n<=e;N(s);var t=e+1;o((0,Z.Ow)(t))},b=f.filter(Boolean).length;return(0,p.jsxs)("form",{className:"modal_conts",onSubmit:x,children:[(0,p.jsx)("div",{className:"modal_tit",children:(0,p.jsx)("h2",{children:"\ub9ac\ubdf0 \uc791\uc131\ud558\uae30"})}),(0,p.jsxs)("div",{className:u.Z.modalCont,children:[(0,p.jsx)("div",{className:u.Z.starrating,children:(0,p.jsx)("div",{className:u.Z.star,children:[1,2,3,4,5].map((function(e,s){return(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.editStar," ").concat(e<=b?u.Z.starActive:""),onClick:function(){return g(e-1)},onMouseEnter:function(){return g(e-1)},children:"star"},s)}))})}),(0,p.jsx)("div",{className:u.Z.reviewEdit,children:(0,p.jsx)("textarea",{type:"text",name:"content",className:u.Z.editArea,value:n,onChange:function(e){return o((0,Z.dm)(e.target.value))}})}),(0,p.jsxs)("div",{className:u.Z.doublebutton,children:[(0,p.jsx)(d.rU,{className:"btn_s btn_normal",onClick:function(){o((0,Z.Au)())},children:"\ub2eb\uae30"}),(0,p.jsx)("button",{type:"submit",className:"btn_s btn_full",children:"\uc800\uc7a5"})]})]})]})};s.default=function(){var e=(0,m.I0)(),s=(0,o.s0)(),n=(0,m.v9)((function(e){return e.item.itemDetail})),a=(0,m.v9)((function(e){return e.review.reviews})),b=(0,m.v9)((function(e){return e.review.myItemReviewRating})),w=(0,m.v9)((function(e){return e.review.myItemReviewContents})),k=(0,m.v9)((function(e){return e.item.similarItems})),I=(0,m.v9)((function(e){return e.review.reviewModal})),y=(0,m.v9)((function(e){return e.item.loginModal})),A=(0,m.v9)((function(e){return e.user.isLoggedIn})),S=(0,r.useState)(!1),C=(0,c.Z)(S,2),E=C[0],_=C[1],D=(0,r.useState)(!0),R=(0,c.Z)(D,2),L=R[0],F=R[1],O=(0,o.UO)().subsId,P=(0,r.useState)([]),U=(0,c.Z)(P,2),M=U[0],B=U[1],K=(0,r.useState)({}),T=(0,c.Z)(K,2),G=T[0],H=T[1],Y=(0,r.useState)([]),q=(0,c.Z)(Y,2),z=q[0],J=q[1],Q=(0,r.useState)({}),V=(0,c.Z)(Q,2),W=V[0],X=V[1],$=(0,r.useState)(!1),ee=(0,c.Z)($,2),se=ee[0],ne=ee[1],ae=(0,r.useState)(!1),te=(0,c.Z)(ae,2),ie=te[0],ce=te[1],re=(0,m.v9)((function(e){return e.review.pagedReviews})),le=(0,r.useState)(1),me=(0,c.Z)(le,2),oe=me[0],de=me[1],ue=(0,r.useState)(0),he=(0,c.Z)(ue,2),xe=he[0],ve=he[1],je=function(){var s=(0,i.Z)((0,t.Z)().mark((function s(){var n,a,i,c,r,m,o,d;return(0,t.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l.Z.get("/subs/detail/".concat(O));case 3:if(a=s.sent,i=a.data,e((0,f.lY)(i)),c=i.itemDetail.ranks,H(c.find((function(e){return"DEFAULT"===e.rankLevel}))),J(c.filter((function(e){return"DEFAULT"!==e.rankLevel}))),0!==Object.keys(i.memberInfo).length&&(ne(i.memberInfo.subsLike),ce(i.memberInfo.subsHave)),0!==i.itemDetail.reviews.length){for(e((0,Z.CE)(i.itemDetail.reviews)),r=i.itemDetail.reviews.slice(xe,xe+5),e((0,Z.Kd)(r)),ve(0),de(1),m=i.itemDetail.ratingAvg,o=[],d=0;d<5;d++)o.push(d<m);B(o)}else e((0,Z.CE)([])),e((0,Z.Kd)([]));A&&null!==(n=i.memberInfo)&&void 0!==n&&n.review&&(e((0,Z.Ow)(i.memberInfo.review.rating)),e((0,Z.dm)(i.memberInfo.review.contents))),s.next=18;break;case 14:s.prev=14,s.t0=s.catch(0),console.log("Error fetching item:",s.t0),alert("\uc11c\ube44\uc2a4\ub97c \uac00\uc838\uc624\ub358 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.");case 18:return s.prev=18,F(!1),s.finish(18);case 21:case"end":return s.stop()}}),s,null,[[0,14,18,21]])})));return function(){return s.apply(this,arguments)}}();(0,r.useEffect)((function(){je()}),[e,I,O]),(0,r.useEffect)((function(){0!==Object.keys(n).length?_(!0):_(!1)}),[e,n]),(0,r.useEffect)((function(){var s=a.slice(xe,xe+5);e((0,Z.Kd)(s))}),[e,a,xe,oe]);(0,r.useEffect)((function(){ve(5*(oe-1))}),[oe]),(0,r.useEffect)((function(){var e=a.map((function(e){var s=e.rating;return Array(5).fill(!1).map((function(e,n){return n<s}))}));X(e)}),[a]);var fe=function(){var s=(0,i.Z)((0,t.Z)().mark((function s(){var n;return(0,t.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!A){s.next=16;break}return{subsId:O},s.prev=2,n="/subs/like",se&&(n="/subs/dislike"),s.next=7,l.Z.post("".concat(n,"/").concat(O),{subsId:O});case 7:200===s.sent.status?(ne(!se),e((0,f.rG)()),je()):(e((0,f.wS)()),alert("\uad00\uc2ec\uc11c\ube44\uc2a4 ".concat(se?"\ud574\uc81c":"\ub4f1\ub85d"," \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."))),s.next=16;break;case 11:s.prev=11,s.t0=s.catch(2),console.log("Error ".concat(se?"dislike":"like"," item:"),s.t0),e((0,f.wS)()),alert("\uad00\uc2ec\uc11c\ube44\uc2a4 ".concat(se?"\ud574\uc81c":"\ub4f1\ub85d"," \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."));case 16:case"end":return s.stop()}}),s,null,[[2,11]])})));return function(){return s.apply(this,arguments)}}(),Ze=function(){e((0,Z.Au)())},pe=function(){e((0,f.b_)())};return(0,p.jsxs)(p.Fragment,{children:[!A&&(y?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(x.Z,{})," ",(0,p.jsx)("div",{className:"modalBg",onClick:pe})]}):null),I?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g,{myItemReviewContents:w,myItemReviewRating:b,subsId:O})," ",(0,p.jsx)("div",{className:"modalBg",onClick:Ze})]}):null,(0,p.jsx)("section",{className:u.Z.pagewrapPd,children:(0,p.jsxs)("div",{className:"webwidth",children:[L?(0,p.jsx)(v.ZP,{}):E?(0,p.jsxs)("div",{className:u.Z.detailwrap,children:[(0,p.jsx)("section",{className:u.Z.left,children:(0,p.jsxs)("div",{className:u.Z.fixed,children:[(0,p.jsxs)("div",{className:u.Z.box,children:[(0,p.jsx)("h2",{className:u.Z.name,children:n.name}),(0,p.jsxs)("div",{className:u.Z.tag,children:[(0,p.jsx)("p",{children:n.category}),n.tags.map((function(e,s){return(0,p.jsx)("p",{children:e.tagName},s)}))]}),(0,p.jsxs)("div",{className:u.Z.price,children:[z.map((function(e,s){return(0,p.jsxs)("p",{className:u.Z.subprice,children:[e.rankName," ",(0,p.jsxs)("span",{className:u.Z.point,children:["\uc6d4 ",e.price," \uc6d0"]})]},s)})),(0,p.jsxs)("p",{className:u.Z.mainprice,children:[G.rankName," ",(0,p.jsxs)("span",{className:u.Z.point,children:["\uc6d4 ",G.price," \uc6d0"]})]})]}),(0,p.jsxs)("div",{className:u.Z.starrating,children:[(0,p.jsx)("div",{className:u.Z.star,children:0===M.length?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.starInActive),children:"star"}),(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.starInActive),children:"star"}),(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.starInActive),children:"star"}),(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.starInActive),children:"star"}),(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.starInActive),children:"star"})]}):M.map((function(e,s){return e?(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.starActive),children:"star"},s):(0,p.jsx)("span",{className:"material-icons",children:"star"},s)}))}),(0,p.jsxs)("p",{className:"txt_ex",children:[a.length,"\uba85\uc758 \uc774\uc6a9\uc790\uac00 \ud3c9\uac00\ud588\uc5b4\uc694."]})]})]}),(0,p.jsxs)("div",{className:u.Z.btnArea,children:[A&&(0,p.jsx)("button",{type:"button",className:u.Z.likebtn,onClick:fe,children:se?(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.likeActive),children:"favorite"}):(0,p.jsx)("span",{className:"material-icons",children:"favorite_border"})}),A&&(0,p.jsx)("button",{type:"button",className:u.Z.reviewbtn,onClick:function(){ie?Ze():alert("\uad6c\ub3c5\uc911\uc778 \uc11c\ube44\uc2a4\ub9cc \ub9ac\ubdf0\ub97c \uc791\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")},children:(0,p.jsx)("span",{className:"material-icons",children:"edit"})}),(0,p.jsx)("button",{type:"button",className:u.Z.subsbtn,onClick:function(){if(A){var e={subsId:O};s(ie?"/Subscribe/DelSubs":"/Subscribe/AddSubs",{state:e})}else pe()},children:ie?"\uad6c\ub3c5 \ubcc0\uacbd/\ud574\uc9c0":"\uad6c\ub3c5\ud558\uae30"})]})]})}),(0,p.jsxs)("section",{className:u.Z.right,children:[(0,p.jsx)("article",{className:"".concat(u.Z.cont," ").concat(u.Z.detailLg),children:(0,p.jsx)("div",{className:u.Z.img,children:(0,p.jsx)("img",{src:n.image||N,alt:n.name})})}),(0,p.jsx)("article",{className:u.Z.cont,children:n.info?(0,p.jsx)("p",{children:n.info}):(0,p.jsx)("p",{className:"txt_grey",children:"\uad6c\ub3c5\uc11c\ube44\uc2a4 \uc124\uba85\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})}),(0,p.jsxs)("article",{className:u.Z.cont,children:[(0,p.jsx)("div",{className:u.Z.tit,children:(0,p.jsx)("h3",{children:"\uc694\uae08\uc81c"})}),(0,p.jsx)("div",{className:u.Z.subscribe,children:n.ranks.map((function(e,s){return(0,p.jsxs)("div",{className:u.Z.box,children:[(0,p.jsxs)("div",{className:u.Z.left,children:[(0,p.jsx)("h2",{className:u.Z.name,children:e.rankName}),(0,p.jsx)("ul",{className:u.Z.detail,children:e.content.map((function(e,s){return(0,p.jsx)("li",{children:e},s)}))})]}),(0,p.jsx)("div",{className:u.Z.right,children:(0,p.jsxs)("p",{className:u.Z.price,children:["\uc6d4 ",(0,p.jsx)("span",{className:u.Z.point,children:e.price}),"\uc6d0"]})})]},s)}))})]}),(0,p.jsxs)("article",{className:"".concat(u.Z.cont," ").concat(u.Z.ratingwrap),children:[(0,p.jsx)("div",{className:u.Z.tit,children:(0,p.jsx)("h3",{children:"\uad6c\ub3c5\uc790 \ud55c\uc904\ud3c9"})}),W&&W.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:u.Z.ratings,children:re.map((function(e,s){return(0,p.jsxs)("article",{className:u.Z.rating,children:[(0,p.jsx)("div",{className:u.Z.userImg,children:(0,p.jsx)("div",{className:u.Z.circle,children:(0,p.jsx)("img",{src:e.memberImage||N,alt:"\uc720\uc800 \uc774\ubbf8\uc9c0"})})}),(0,p.jsxs)("div",{className:u.Z.txt,children:[(0,p.jsx)("h4",{className:u.Z.name,children:e.memberName}),(0,p.jsx)("div",{className:u.Z.starrating,children:(0,p.jsx)("div",{className:u.Z.star,children:W[s].map((function(e,s){return e?(0,p.jsx)("span",{className:"material-icons ".concat(u.Z.starActive),children:"star"},s):(0,p.jsx)("span",{className:"material-icons",children:"star"},s)}))})}),(0,p.jsx)("p",{className:u.Z.review,children:e.contents})]})]},s)}))}),(0,p.jsx)(j.Z,{handlePageChange:function(e){de(e)},page:oe,count:a.length,ITEMS_PER_PAGE:5})]}):(0,p.jsx)("div",{className:"txt_grey txt_center",children:"\ub4f1\ub85d\ub41c \ub9ac\ubdf0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]})]})]}):(0,p.jsx)(h.Z,{message:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uad6c\ub3c5\uc11c\ube44\uc2a4\uc785\ub2c8\ub2e4."}),(0,p.jsxs)("section",{className:u.Z.section,children:[(0,p.jsx)("div",{className:"cont_tit_m",children:(0,p.jsx)("h2",{children:"\ube44\uc2b7\ud55c \uad6c\ub3c5\uc0c1\ud488"})}),(0,p.jsx)("div",{className:"item-list",children:k.slice(0,4).map((function(e,s){return(0,p.jsxs)(d.rU,{to:"/subs/detail/".concat(e.id),className:"item-list-box",children:[(0,p.jsx)("div",{className:"img",children:(0,p.jsx)("img",{src:e.image||N,alt:e.name})}),(0,p.jsxs)("div",{className:"txt",children:[(0,p.jsx)("h3",{children:e.name}),(0,p.jsx)("div",{className:"tag",children:e.tags.map((function(e,s){return(0,p.jsx)("p",{children:e.tagName},s)}))})]})]},s)}))})]})]})})]})}}}]);
//# sourceMappingURL=488.e222505d.chunk.js.map